<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>SHOP QUAN AO</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Animate.css -->
    <link rel="stylesheet" th:href="@{/client/css/animate.css}">
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" th:href="@{/client/css/icomoon.css}">
    <!-- Bootstrap  -->
    <link rel="stylesheet" th:href="@{/client/css/bootstrap.css}">

    <!-- Magnific Popup -->
    <link rel="stylesheet" th:href="@{/client/css/magnific-popup.css}">

    <!-- Flexslider  -->
    <link rel="stylesheet" th:href="@{/client/css/flexslider.css}">

    <!-- Theme style  -->
    <link rel="stylesheet" th:href="@{/client/css/style.css}">
    <link rel="stylesheet" th:href="@{/client/css/custome.css}">


    <style>
        * {box-sizing: border-box}
        body {font-family: Verdana, sans-serif; margin:0}
        .mySlides {display: none}
        img {vertical-align: middle;}

        /* Slideshow container */
        .slideshow-container {
            max-width: 1000px;
            position: relative;
            margin: auto;
        }

        /* Next & previous buttons */
        .prev, .next {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            padding: 16px;
            margin-top: -22px;
            color: white;
            font-weight: bold;
            font-size: 18px;
            transition: 0.6s ease;
            border-radius: 0 3px 3px 0;
            user-select: none;
        }

        /* Position the "next button" to the right */
        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }

        /* On hover, add a black background color with a little bit see-through */
        .prev:hover, .next:hover {
            background-color: rgba(0,0,0,0.8);
        }

        /* Caption text */
        .text {
            color: #f2f2f2;
            font-size: 15px;
            padding: 8px 12px;
            position: absolute;
            bottom: 8px;
            width: 100%;
            text-align: center;
        }

        /* Number text (1/3 etc) */
        .numbertext {
            color: #f2f2f2;
            font-size: 12px;
            padding: 8px 12px;
            position: absolute;
            top: 0;
        }

        /* The dots/bullets/indicators */
        .dot {
            cursor: pointer;
            height: 15px;
            width: 15px;
            margin: 0 2px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.6s ease;
        }

        .active, .dot:hover {
            /*background-color: #717171;*/
        }

        /* Fading animation */
        .fade {
            -webkit-animation-name: fade;
            -webkit-animation-duration: 1.5s;
            animation-name: fade;
            animation-duration: 1.5s;
        }

        @-webkit-keyframes fade {
            from {opacity: .4}
            to {opacity: 1}
        }

        @keyframes fade {
            from {opacity: .4}
            to {opacity: 1}
        }

        /* On smaller screens, decrease text size */
        @media only screen and (max-width: 300px) {
            .prev, .next,.text {font-size: 11px}
        }
    </style>

</head>

<body>

<!--    header-->
<div th:replace="client/fragments/header"></div>

<!-- /.navbar -->

<!-- main -->
<div class="colorlib-shop">
    <div class="container">
        <div class="row row-pb-lg">
            <div class="col-md-10 col-md-offset-1">
                <div class="product-detail-wrap">
                    <div class="row">
                        <div class="col-md-5">
                            <div class="product-entry">
<!--                                <div class="product-img" style="background-image: url(images/ao-so-mi-trang-kem-asm836-8193.jpg);">-->

<!--                                </div>-->
                                <div class="slideshow-container">

<!--                                    <div class="mySlides fade">-->
<!--                                        <div class="numbertext">1 / 3</div>-->
<!--                                        <img th:src="@{/client/images/ao-nu-phoi-vien.jpg}" style="width:100%">-->
<!--                                        <div class="text">Caption Text</div>-->
<!--                                    </div>-->

<!--                                    <div class="mySlides fade">-->
<!--                                        <div class="numbertext">2 / 3</div>-->
<!--                                        <img th:src="@{/client/images/ao-nu-phoi-vien.jpg}" style="width:100%">-->
<!--                                        <div class="text">Caption Two</div>-->
<!--                                    </div>-->

<!--                                    <div class="mySlides fade">-->
<!--                                        <div class="numbertext">3 / 3</div>-->
<!--                                        <img th:src="@{/client/images/ao-nu-phoi-vien.jpg}" style="width:100%">-->
<!--                                        <div class="text">Caption Three</div>-->
<!--                                    </div>-->

<!--                                    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>-->
<!--                                    <a class="next" onclick="plusSlides(1)">&#10095;</a>-->

                                </div>
                                <br>

                                <div style="text-align:center" id="dotpoint">
<!--                                    <span class="dot" onclick="currentSlide(1)"></span>-->
<!--                                    <span class="dot" onclick="currentSlide(2)"></span>-->
<!--                                    <span class="dot" onclick="currentSlide(3)"></span>-->
                                </div>

                            </div>
                        </div>
                        <div class="col-md-7">
                            <form action="/store/product" method="get" th:object="${product}">
                                <input type="hidden" name="id" th:value="${product.id}">
                                <div class="desc">
                                    <h3 th:text="*{name}"></h3>
                                    <p class="price">
                                        <span th:text="*{price}"></span>
                                    </p>
                                    <p>Mô tả</p>
                                    <p style="text-align: justify;" th:text="${product.description}">


                                    </p>


                                    <div class="row row-pb-sm">
                                        <div class="col-md-4">
                                            <div class="input-group">
														<span class="input-group-btn">
															<button type="button" class="quantity-left-minus btn" data-type="minus" data-field="">
																<i class="icon-minus2"></i>
															</button>
														</span>
                                                <input type="text" id="quantity" class="form-control input-number" value="1" min="1" max="100">
                                                <span class="input-group-btn">
															<button type="button" class="quantity-right-plus btn" data-type="plus" data-field="">
																<i class="icon-plus2"></i>
															</button>
														</span>
                                            </div>
                                        </div>
                                    </div>
                                    <label>Choose a Color:</label>

                                    <select id="color">
                                        <option value="Red">Red</option>
                                        <option value="Blue">Blue</option>
                                    </select>
                                    <select id="size">
                                        <option value="S">S</option>
                                        <option value="M">M</option>
                                        <option value="L">L</option>
                                    </select>


<!--                                    <input type="hidden" name="id_product" value="1">-->
                                    <p><button id="addtocart" class="btn btn-primary btn-addtocart" type="submit"> Thêm vào giỏ hàng</button></p>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-10 col-md-offset-1">
                <div class="row">
                    <div class="col-md-12 tabulation">
                        <ul class="nav nav-tabs">
                            <li class="active"><a data-toggle="tab" href="#description">Bình luận</a></li>
                        </ul>
                        <div class="tab-content">
                            <div id="description" class="tab-pane fade in active" th:text="${product.description}">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<button id="addcarthh">Change text</button>
<!-- end main -->
<!-- end main -->
<!--    footer-->
<div th:replace="client/fragments/footer"></div>
</div>

<!-- jQuery -->
<script th:src="@{/client/js/jquery.min.js}"></script>
<!-- jQuery Easing -->
<script th:src="@{/client/js/jquery.easing.1.3.js}"></script>
<!-- Bootstrap -->
<script th:src="@{/client/js/bootstrap.min.js}"></script>
<!-- Waypoints -->
<script th:src="@{/client/js/jquery.waypoints.min.js}"></script>
<!-- Flexslider -->
<script th:src="@{/client/js/jquery.flexslider-min.js}"></script>

<script th:src="@{/client/js/owl.carousel.min.js}"></script>
<!-- Magnific Popup -->
<script th:src="@{/client/js/jquery.magnific-popup.min.js}"></script>
<script th:src="@{/client/js/magnific-popup-options.js}"></script>

<!-- Stellar Parallax -->
<script th:src="@{/client/js/jquery.stellar.min.js}"></script>
<!-- Main -->
<script th:src="@{/client/js/main.js}"></script>

<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script th:inline="javascript">
    // $.widget.bridge('uibutton', $.ui.button)

    var url_string = window.location.href; //window.location.href
    var url = new URL(url_string);
    var id = url.searchParams.get("id");

    $(document).ready(function () {

        $.ajax({
            type: "GET",
            url: "http://localhost:8080/product-api/details?id="+id,
            success: function (response) {
                let i = 1
                let legth = response.length
                response.forEach(data => {
                    $(".slideshow-container").append("<div class=\"mySlides fade\">\n" +
                        "<div class=\"numbertext\">"+i+" / "+legth+"</div>" +
                        "                        <img src=\""+data+"\" style=\"width:100%\">\n" +
                        "                    </div>")
                    $("#dotpoint").append(" <span class=\"dot\" onclick=\"currentSlide("+i+")\"></span>")
                    i++
                })
                $(".slideshow-container").append("<a class=\"prev\" onclick=\"plusSlides(-1)\">&#10094;</a>\n" +
                    "                                    <a class=\"next\" onclick=\"plusSlides(1)\">&#10095;</a>")
            }
        })
        //
        // $("#addcarthh").click(function () {
        //     document.getElementById("carta").innerText = "huhfjakshfkjsf"
        // })



        $(".quantity-left-minus").click(function (){
            let quanlity = $("#quantity").val()
            if (quanlity > 1){
                quanlity--
            } else {
                quanlity = 1
            }
            $("#quantity").attr('value', quanlity)
        })

        $(".quantity-right-plus").click(function () {
            let quanlity = $("#quantity").val()
            quanlity++
            $("#quantity").attr('value', quanlity)
        })

        $("#addtocart").click(function (){
            $.ajax({
                type: "GET",
                url: "http://localhost:8080/user-api",
                success: function (response) {
                    var cart = {
                        quantity: $("#quantity").val(),
                        userId: response.id,
                        color: $("#color").val(),
                        size: $("#size").val()
                    }
                    console.log(cart)
                    $.ajax({
                        type: "POST",
                        url: 'http://localhost:8080/cart/add',
                        dataType: 'json',
                        contentType: 'application/json',
                        success: function () {

                        },
                        data: JSON.stringify(cart)
                    })
                }
            })
        })
    })

    var slideIndex = 1;
    showSlides(slideIndex);

    function plusSlides(n) {
        showSlides(slideIndex += n);
    }

    function currentSlide(n) {
        showSlides(slideIndex = n);
    }

    function showSlides(n) {
        var i;
        var slides = document.getElementsByClassName("mySlides");
        var dots = document.getElementsByClassName("dot");
        if (n > slides.length) {slideIndex = 1}
        if (n < 1) {slideIndex = slides.length}
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex-1].style.display = "block";
        dots[slideIndex-1].className += " active";
    }

</script>

<!--<script src="http://code.jquery.com/jquery-1.9.1.js"></script>-->
<script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"></script>

</body>

</html>